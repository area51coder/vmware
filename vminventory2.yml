---
- name: Sock tunnel setup
  hosts: "{{ list_host }}"
  gather_facts: false

  tasks:
    - name: Gather fact for all vm
      vmware_vm_info:
        hostname: "{{ list_host }}"
        #username: "{{ username }}"
        #password: "{{ password }}"
        validate_certs: no
      register: vms
      delegate_to: localhost
